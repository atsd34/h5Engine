function exclamation(t,i,o,e,s){o&&(t=(t+o)/2),e&&(i=(i+e)/2);var n=objects[addPrefab("exclamation.prefab",{position:{x:t,y:i},tint:{tint:null==s?16777215:s}})[0]];setTimeout(function(){n.remove()},1e3)}gm.Achievments=function(){this.achivementList=[]},gm.Achievments.prototype.addAchievment=function(t,i,o,e){this.achivementList.push({name:t,controlFunction:o,description:i,save:e})},gm.Achievments.prototype.getText=function(){var t=0;for(var i in this.laList)this.laList[i].done&&t++;return"("+t+"/"+this.achivementList.length+")"},gm.Achievments.prototype.getCurrent=function(){for(var t=[],i=JSON.parse(localStorage.escapeFromEvilCorpAchievments),o=0;o<this.achivementList.length;o++){var e=i[this.achivementList[o].name];if(null==e||null==e.done||0==e.done){for(var s in e)this.achivementList[o][s]=e[s];t.push(this.achivementList[o])}if(3==t.length){for(var o in t)t[o].save&&t[o].save();return t}}for(var o in t)t[o].save&&t[o].save();return t},gm.Achievments.prototype.create=function(){null==localStorage.escapeFromEvilCorpAchievments&&(localStorage.escapeFromEvilCorpAchievments="{}"),this.addAchievment("atLeast100","Score at Least 100",function(){if(100<=objects.Director.Director.score)return!0}),this.addAchievment("nearDeath5","Experience Near Death 5 Times",function(){var t=objects.Main.Main.findClosest("obstacle");if(t.len<256&&-1==this.offs.indexOf(t.obj.cutter.id)&&(this.offs.push(t.obj.cutter.id),exclamation(objects.Main.position.x,objects.Main.position.y,t.obj.position.x,t.obj.position.y,16737792)),this.progress=this.offs.length,5<=this.progress)return!0},function(){this.offs=new Array}),this.addAchievment("dieFlying","Die to flying saw",function(){try{var t=getByTagName("Explode");if(null!=t&&0<t.length){var i=objects.Director.Director.floorY,o=t[0].position.other.position.y<i-300;return o&&exclamation(t[0].position.other.position.x,t[0].position.other.position.y,void 0,void 0,65280),o}}catch(t){}}),this.addAchievment("between100150","Score between 100 and 150",function(){var t=getByTagName("Explode");if(null!=t&&0<t.length&&100<=objects.Director.Director.score&&objects.Director.Director.score<=150)return!0}),this.addAchievment("close5","Push 5 buttons in a row",function(){try{null==this.offs&&(this.offs=new Array);var t=getByTagName("Vial");if(null!=t&&0<t.length){for(var i=0;i<t.length;i++){for(var o=t[i],e=-1,s=0;s<this.offs.length;s++)this.offs[s].x==o.position.x&&(e=s);-1==e?this.offs.push({x:o.position.x,on:"light.png"==o.sprite.path}):this.offs[e].on="light.png"==o.sprite.path}this.offs=this.offs.sort(function(t,i){return t.x-i.x});var n=0,r=0;for(var s in this.offs)0==this.offs[s].on?n++:n=0,r<n&&(r=n);if(5<=r)return!0}}catch(t){}},function(){this.offs=new Array}),this.addAchievment("Jump20","Jump over 20 saw in same game",function(){if(1!=objects.Main.Main.onRope){var t=objects.Main.Main.findClosest("obstacle");if(t.len<512&&-1==this.offs.indexOf(t.obj.cutter.id)&&t.obj.position.y>objects.Main.position.y&&Math.abs(objects.Main.position.x-t.obj.position.x)<64&&(exclamation(objects.Main.position.x,objects.Main.position.y,t.obj.position.x,t.obj.position.y),this.offs.push(t.obj.cutter.id)),this.progress=this.offs.length,20<=this.progress)return!0}},function(){this.offs=new Array}),this.addAchievment("foot200","Score 200 while running on foot",function(){if(objects.MainSprite0&&objects.MainSprite0.objectAnimator&&"walk"==objects.MainSprite0.objectAnimator.playing){if(this.progress||(this.progress=0),-1!=this.lastX&&(this.progress+=(objects.Main.position.x-this.lastX)/100),this.lastX=objects.Main.position.x,200<=this.progress)return!0}else objects.MainSprite0&&objects.MainSprite0.objectAnimator&&(this.lastX=-1)}),this.addAchievment("atLeast1000","Score total of 1000",function(){if(null==this.lastScore&&(this.lastScore=0),objects.Director.Director.score>this.lastScore&&(this.progress+=objects.Director.Director.score-this.lastScore),this.lastScore=objects.Director.Director.score,1e3<=this.progress)return!0}),this.addAchievment("atLeast300","Score at Least 300",function(){if(300<=objects.Director.Director.score)return!0}),this.addAchievment("close20","Push 20 buttons",function(){try{null==this.progress&&(this.progress=0),null==this.offs&&(this.offs=new Array);var t=getByTagName("Vial");if(null!=t&&0<t.length){for(var i=0;i<t.length;i++){var o=t[i];"lightoff.png"==o.sprite.path&&-1==this.offs.indexOf(o.position.x)&&(this.offs.push(o.position.x),this.progress++)}if(20<=this.progress)return!0}}catch(t){}},function(){this.offs=[]}),this.addAchievment("nearDeath5Swing","Experience Near Death 5 Times After Swinging",function(){if("swingback"==objects.MainSprite0.objectAnimator.lastPlayed||"swingforward"==objects.MainSprite0.objectAnimator.lastPlayed){var t=objects.Main.Main.findClosest("obstacle");if(t.len<256&&this.offs.indexOf(t.obj.cutter.id)&&(this.offs.push(t.obj.cutter.id),exclamation(objects.Main.position.x,objects.Main.position.y,t.obj.position.x,t.obj.position.y,16737792)),this.progress=this.offs.length,5<=this.progress)return!0}},function(){this.offs=new Array}),this.addAchievment("dieMoving","Die to moving saw",function(){try{var t=getByTagName("Explode");if(null!=t&&0<t.length){objects.Director.Director.floorY;var i=1==t[0].position.other.cutter.horizantalMove;return i&&exclamation(t[0].position.other.position.x,t[0].position.other.position.y,void 0,void 0,65280),i}}catch(t){}}),this.addAchievment("jump100","Score 100 while jumping",function(){if(objects.MainSprite0&&objects.MainSprite0.objectAnimator&&"jump"==objects.MainSprite0.objectAnimator.playing){if(this.progress||(this.progress=0),-1!=this.lastX&&(this.progress+=(objects.Main.position.x-this.lastX)/100),this.lastX=objects.Main.position.x,100<=this.progress)return!0}else objects.MainSprite0&&objects.MainSprite0.objectAnimator&&(this.lastX=-1)}),this.addAchievment("atLeast500","Score at Least 500",function(){if(500<=objects.Director.Director.score)return!0}),this.addAchievment("Swing20","Swing over 20 saw in same game",function(){if(1==objects.Main.Main.onRope){var t=objects.Main.Main.findClosest("obstacle");if(t.len<512&&-1==this.offs.indexOf(t.obj.cutter.id)&&t.obj.position.y>objects.Main.position.y&&Math.abs(objects.Main.position.x-t.obj.position.x)<128&&(this.offs.push(t.obj.cutter.id),exclamation(objects.Main.position.x,objects.Main.position.y,t.obj.position.x,t.obj.position.y)),this.progress=this.offs.length,20<=this.progress)return!0}},function(){this.offs=new Array}),this.addAchievment("rope100","Score 100 while swinging",function(){if(objects.MainSprite0&&objects.MainSprite0.objectAnimator&&("swingback"==objects.MainSprite0.objectAnimator.playing||"swingforward"==objects.MainSprite0.objectAnimator.playing)){if(this.progress||(this.progress=0),-1!=this.lastX&&objects.Main.position.x>this.lastX&&(this.progress+=(objects.Main.position.x-this.lastX)/100),this.lastX=objects.Main.position.x,100<=this.progress)return!0}else objects.MainSprite0&&objects.MainSprite0.objectAnimator&&(this.lastX=-1)}),this.addAchievment("atLeast10000","Score total of 10000",function(){if(null==this.lastScore&&(this.lastScore=0),objects.Director.Director.score>this.lastScore&&(this.progress+=objects.Director.Director.score-this.lastScore),this.lastScore=objects.Director.Director.score,1e3<=this.progress)return!0}),this.addAchievment("close25","Push 20 buttons in same game",function(){try{null==this.offs&&(this.offs=new Array);var t=getByTagName("Vial");if(null!=t&&0<t.length){for(var i=0;i<t.length;i++){var o=t[i];"lightoff.png"==o.sprite.path&&-1==this.offs.indexOf(o.position.x)&&this.offs.push(o.position.x)}if(this.progress=this.offs.length,20<=this.progress)return!0}}catch(t){}},function(){this.offs=[]}),this.addAchievment("foot500","Score 500 while running on foot",function(){if(objects.MainSprite0&&objects.MainSprite0.objectAnimator&&"walk"==objects.MainSprite0.objectAnimator.playing){if(this.progress||(this.progress=0),-1!=this.lastX&&(this.progress+=(objects.Main.position.x-this.lastX)/100),this.lastX=objects.Main.position.x,500<=this.progress)return!0}else objects.MainSprite0&&objects.MainSprite0.objectAnimator&&(this.lastX=-1)}),this.addAchievment("atLeast1000","Score at Least 1000",function(){if(1e3<=objects.Director.Director.score)return!0}),this.current=this.getCurrent(),this.laList=JSON.parse(localStorage.escapeFromEvilCorpAchievments)},gm.Achievments.prototype.update=function(t){for(var i=0;i<this.current.length;i++){var o=this.current[i];if(1!=o.done)try{var e=o.controlFunction();o.done=e}catch(t){}this.laList[o.name]=o}},gm.Achievments.prototype.dispose=function(){this.save()},gm.Achievments.prototype.save=function(){localStorage.escapeFromEvilCorpAchievments=JSON.stringify(this.laList)};