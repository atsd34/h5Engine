gm.Director=function(){this.minVisibleX=-400,this.maxVisibleX=450,this.minVisibleY=0,this.maxVisibleY=0,this.minimumHeight=250,this.maximumHeight=320,this.showTopAlways=!1,this.yOffset=0},gm.Director.prototype.drawBox=function(i,t,e,a,s){this["b"+i].clear(),this["b"+i].beginFill(0,1),this["b"+i].lineStyle(0),this["b"+i].moveTo(t,a),this["b"+i].lineTo(e,a),this["b"+i].lineTo(e,s),this["b"+i].lineTo(t,s),this["b"+i].lineTo(t,a)},gm.Director.prototype.create=function(){this.b1=new PIXI.Graphics,this.b2=new PIXI.Graphics,this.b3=new PIXI.Graphics,this.b4=new PIXI.Graphics,this.gameObject.position.container.addChild(this.b1),this.gameObject.position.container.addChild(this.b2),this.gameObject.position.container.addChild(this.b3),this.gameObject.position.container.addChild(this.b4)},gm.Director.prototype.update=function(i){var t=0,e=0,a=objects.main.position,s=game.renderer.height,h=game.renderer.width,r=Math.max(1,Math.ceil(s/this.maximumHeight)),m=0;h/r>640&&(m=(h/r-640)/2),h/s<1?(r=Math.max(1,Math.ceil(h/this.maximumHeight)),this.yOffset=Math.floor((s-h)/2/r)):this.yOffset=0,camera.scale=r,t=a.x+m-h/(2*r)<this.minVisibleX?this.minVisibleX-m+h/(2*r):a.x-m+h/(2*r)>this.maxVisibleX?this.maxVisibleX+m-h/(2*r):a.x,e=a.y-s/(2*r)<this.minVisibleY?this.minVisibleY+s/(2*r):a.y+s/(2*r)>this.maxVisibleY?this.maxVisibleY-s/(2*r):a.y,this.cameraX(t),this.cameraY(e);var o=parseInt(h/(2*camera.scale));this.left=Math.max(this.gameObject.LevelProgression.minVisibleX,camera.x-o),this.right=Math.min(this.gameObject.LevelProgression.maxVisibleX,camera.x+o),this.drawBox(1,this.minVisibleX-h,this.left,camera.y-s,camera.y+s),this.drawBox(2,this.maxVisibleX+h,this.right,camera.y-s,camera.y+s),this.drawBox(4,camera.x-h,camera.x+h,this.maxVisibleY+h,this.maxVisibleY)},gm.Director.prototype.dispose=function(){},gm.Director.prototype.cameraX=function(i){Math.abs(camera.x-i)<5?camera.x=i:Math.abs(camera.x-i)<100?camera.x+=4*Math.sign(i-camera.x):camera.x+=20*Math.sign(i-camera.x)},gm.Director.prototype.cameraY=function(i){var t=game.renderer.height/camera.scale,e=this.maxVisibleY-t/2;if(this.showTopAlways){var a=objects.Director.LevelProgression.minVisibleY;return void(camera.y=a+t/2)}Math.abs(camera.y-this.yOffset-i)<5?camera.y=Math.min(e,i+this.yOffset):camera.y=Math.min(e,camera.y+4*Math.sign(i-camera.y+this.yOffset))};