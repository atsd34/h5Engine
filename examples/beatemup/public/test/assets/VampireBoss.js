gm.VampireBoss=function(){this.preLife=0,this.attacking=!1,this.idle=!1,this.vampires={}},gm.VampireBoss.prototype.create=function(){this.preLife=this.gameObject.life.remaining},gm.VampireBoss.prototype.update=function(e){var i=this,t=this.gameObject.position;if(this.preLife!=this.gameObject.life.remaining&&(this.gameObject.life.invulnerable=1),0==this.gameObject.life.remaining)return"die"!=this.gameObject.sprite.currentAnim.name?(addPrefab("VampireCloud.prefab",{position:{x:t.x,y:t.y}}),this.gameObject.sprite.playOnceAnim("die",function(){}),this.gameObject.Physics.gravityFactor=1,void(this.gameObject.Physics.vx=0)):void 0;if(!monsterActivation(this)&&!this.attacking){if(this.preLife!=this.gameObject.life.remaining)8==this.preLife||6==this.preLife||4==this.preLife||2==this.preLife?(addPrefab("VampireCloud.prefab",{position:{x:t.x,y:t.y}}),t.x=124,t.scaleX=-1):(this.gameObject.Physics.gravityFactor=0,this.gameObject.Physics.vx=-120,addPrefab("VampireCloud.prefab",{position:{x:t.x,y:t.y}}),addPrefab("VampireCloud.prefab",{position:{x:-300,y:-283}}),this.vampires.v1=addPrefab("Vampire.prefab",{position:{x:-300,y:-283}})[0],addPrefab("VampireCloud.prefab",{position:{x:220,y:-283}}),this.vampires.v2=addPrefab("Vampire.prefab",{position:{x:220,y:-283}})[0],addPrefab("VampireCloud.prefab",{position:{x:-43,y:-283}}),this.vampires.v3=addPrefab("Vampire.prefab",{position:{x:-43,y:-283}})[0],this.gameObject.sprite.loopAnim("fly"));else if("a1"==this.gameObject.sprite.currentAnim.name)i.idle=!0,this.gameObject.sprite.playOnceAnim("idle1",function(){i.idle=!1});else if("a2"==this.gameObject.sprite.currentAnim.name)i.idle=!0,this.gameObject.sprite.playOnceAnim("idle2",function(){i.idle=!1});else if("idle1"==this.gameObject.sprite.currentAnim.name&&0==i.idle)this.attacking=!0,this.gameObject.sprite.playOnceAnim("a2",function(){var e=createDestroyer("",t.x+20*t.scaleX,t.y,32,32,void 0,"batWeapon.prefab");e.Physics.vx=150*t.scaleX,e.Physics.vy=-80,i.attacking=!1});else if("idle2"==this.gameObject.sprite.currentAnim.name&&0==i.idle)this.attacking=!0,this.gameObject.sprite.playOnceAnim("a1",function(){createDestroyer("",t.x+20*t.scaleX,t.y,32,32,void 0,"batWeapon.prefab").Physics.vx=180*t.scaleX,i.attacking=!1});else if("fly"==this.gameObject.sprite.currentAnim.name){if(void 0==objects[this.vampires.v1]&&void 0==objects[this.vampires.v2]&&void 0==objects[this.vampires.v3])return addPrefab("VampireCloud.prefab",{position:{x:t.x,y:t.y}}),t.x=-190,t.y=-200,this.gameObject.Physics.gravityFactor=1,this.gameObject.Physics.vx=0,t.scaleX=1,i.idle=!0,void this.gameObject.sprite.playOnceAnim("idle1",function(){i.idle=!1});if(this.gameObject.life.invulnerable=.1,this.gameObject.position.y>-375)this.gameObject.Physics.vy=-150;else if(this.gameObject.Physics.vy=0,Math.abs(this.gameObject.position.x-objects.main.position.x)<10){var a=getByTagName("BloodBall");if(void 0==a||0==a.length){var s=objects[addPrefab("BloodBall.prefab",{position:{x:t.x,y:t.y}})[0]];s.sprite.playOnceAnim("default",function(){s.sprite.loopAnim("rotate")});var r=createDestroyer(s.name.value,0,0,32,32,function(){r.remove()});setTimeout(function(){r.remove(),s.remove()},1800)}}this.gameObject.position.x>260?this.gameObject.Physics.vx=-90:this.gameObject.position.x<-335&&(this.gameObject.Physics.vx=90)}this.preLife=this.gameObject.life.remaining}},gm.VampireBoss.prototype.dispose=function(){};