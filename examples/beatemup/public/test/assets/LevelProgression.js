gm.LevelProgression=function(){this.progression="[]",this.part=0,this.minVisibleX=-400,this.maxVisibleX=450,this.minVisibleY=0,this.maxVisibleY=0,this.saveOn="1,2",this.currentSceneName=""},gm.LevelProgression.prototype.create=function(){this.p=JSON.parse(this.progression),this.currentSceneName=currentSceneName},gm.LevelProgression.prototype.afterCreate=function(){},gm.LevelProgression.prototype.update=function(e){void 0!=localStorage.gameEngineStatesAutoSave&&1!=this.fromAutoState&&loadState("AutoSave",function(e){return e.Director.LevelProgression.currentSceneName!=objects.Director.LevelProgression.currentSceneName||e.Director.LevelProgression.part>objects.Director.LevelProgression.part});var t=this.p[this.part];if(!(objects.main.life.remaining<1)){var i=objects.Director.Director,n=getByTagName("enemy");if(n&&(!t.type||"all"==t.type))for(var r=0;r<n.length;r++)if(n[r].life&&n[r].life.activated&&n[r].life.remaining>0)return;if("pos"!=t.type||1==objects.main.Physics.grounded){var o=objects.main.position;t.mxx&&o.x>t.mxx||t.mnx&&o.x<t.mnx||t.mxy&&o.y>t.mxy||t.mny&&o.y<t.mny||(this.part++,this.p[this.part]||this.nextLevel(),t.mxx&&(i.maxVisibleX=t.mxx),t.mnx&&(i.minVisibleX=t.mnx),t.mxy&&(i.maxVisibleY=t.mxy),t.mny&&(i.minVisibleY=t.mny),-1!=this.saveOn.split(",").indexOf(this.part.toString())&&(this.fromAutoState=!0,this.SceneName=currentSceneName,objects.main.main.combo=0,objects.main.main.currentE=new Array,objects.main.life.remaining<2&&(objects.main.life.remaining=2),saveState("AutoSave","life,mana")))}}},gm.LevelProgression.prototype.dispose=function(){},gm.LevelProgression.prototype.nextLevel=function(){nextScene()},gm.LevelProgression.prototype.sceneChange=function(e,t){e!=t&&"AutoSave.auto"!=t&&(saveState("AutoSave","life,mana"),this.fromAutoState=!0)};