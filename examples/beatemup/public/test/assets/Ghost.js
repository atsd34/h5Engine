gm.Ghost=function(){this.MonsterType="Imp",this.running=!1,this.closeness=0,this.vx=20,this.iswalking=!0,this.left=0,this.right=0},gm.Ghost.prototype.create=function(){},gm.Ghost.prototype.update=function(e){if(!monsterActivation(this)){if(this.gameObject.life.remaining<=0&&"die"!=this.gameObject.sprite.currentAnim.name){try{for(var t=childrenGameObject[this.gameObject.name.value],i=0;i<t.length;i++)try{objects[t[i]].remove()}catch(e){}}catch(e){}this.gameObject.sprite.loopAnim("die"),"banshee"==this.MonsterType?(this.gameObject.Physics.gravityFactor=1,this.gameObject.Physics.sleeping=!1):this.gameObject.Physics.vy=-10,this.gameObject.Physics.vx=0}if("die"==this.gameObject.sprite.currentAnim.name)return"banshee"==this.MonsterType?this.gameObject.Physics.gravityFactor=1:this.gameObject.Physics.vy=-4*this.vx,this.gameObject.Physics.vx=0,void(this.gameObject.position.y<objects.Director.Director.minVisibleY&&this.gameObject.remove());var s=this,a=this.gameObject.position,c=objects.main.position,n=Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y));if((n>100||Math.abs(c.y-a.y)>10)&&"default"==this.gameObject.sprite.currentAnim.name)this.gameObject.position.scaleX=Math.sign(c.x-a.x),this.gameObject.Physics.vx=Math.abs(c.x-a.x)>50?this.vx*(c.x-a.x)/n:0,this.gameObject.Physics.vy=Math.abs(c.y-a.y)>5?8*this.vx*(c.y-a.y)/n:this.vx*(c.y-a.y)/n;else if("default"==this.gameObject.sprite.currentAnim.name)if(this.gameObject.Physics.vx=0,this.gameObject.Physics.vy=0,"banshee"==this.MonsterType){var h=Math.sign(objects.main.position.x-s.gameObject.position.x);s.gameObject.sprite.playOnceAnim("prepare",function(){var e=void 0;(e=createDestroyer("",s.gameObject.position.x,s.gameObject.position.y-5,32,32,void 0,"Scream.prefab")).position.scaleX=h,e.Physics.vx=100*h,setTimeout(function(){e.remove()},1e3),s.gameObject.sprite.loopAnim("default")})}else{var o=15*this.vx*Math.sign(c.x-a.x);this.vx,c.y,a.y;this.gameObject.position.scaleX=Math.sign(c.x-a.x),s.gameObject.sprite.playOnceAnim("prepare",function(){var e=void 0;e=createDestroyer(s.gameObject.name.value,4,-4,16,24),s.gameObject.Physics.vx=o,s.gameObject.Physics.vy=0,s.gameObject.sprite.playOnceAnim("attack",function(){setTimeout(function(){s.gameObject.Physics.vx=0,s.gameObject.Physics.vy=0,e.remove(),s.gameObject.sprite.playOnceAnim("rest",function(){s.gameObject.sprite.loopAnim("default")})},500)})})}}},gm.Ghost.prototype.dispose=function(){};